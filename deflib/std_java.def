# basic_frame for console prog, gui_frame for awt prog
#   Single class library don't need use frame [$list ...]

subcode: basic_frame
    $list _basic_main

fncode: _basic_main(main)
    $call main2

#---- BufferedReader ----
subcode: input(@file)
    $import java.io.*
    try{
        $(if:file=)
            $(set:in=new InputStreamReader(System.in))
        $(else)
            $(set:in=new FileReader($(file)))
        $local BufferedReader In = new BufferedReader($(in))
        BLOCK
    }
    catch(Exception e){
    }

    subcode: get_s(v)
        $(v) = In.readLine()

#---- Scanner ----
subcode: scanner(@file)
    $import java.io.*
    $import java.util.Scanner
    try{
        $(if:file=)
            $(set:in=new InputStreamReader(System.in))
        $(else)
            $(set:in=new FileReader($(file)))
        scanner = new Scanner(new BufferedReader($(in)))
        BLOCK
    }
    finally{
        $if scanner != null
            scanner.close()
    }

    subcode: get_s(v)
        $(v) = scanner.nextLine()

    subcode: get_word(v)
        $(v) = scanner.next()

    subcode: get_int(v)
        $(v) = scanner.nextInt()

    subcode: get_double(v)
        $(v) = scanner.nextDouble()

#----------------------------------------
macros:
    atoi: Integer.parseInt($1)
    atof: Double.parseDouble($1)

    itoa: Integer.toString($1)


